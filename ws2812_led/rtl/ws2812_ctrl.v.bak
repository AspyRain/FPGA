`include "../defines.v"
module ws2812_ctrl (
    input   wire    sys_clk,
    input   wire    sys_rst_n,
    input   wire    bit,

    output  wire    dout
);
reg  [5:0]  cnt_0;//bit0计数寄存器
wire        flag_0;
wire        add_cnt0;//bit0开始计数条件
wire        end_cnt0;//bit0结束计数条件

reg  [6:0]  cnt_1;//bit1计数寄存器
wire        add_cnt1;//bit1开始计数条件
wire        end_cnt1;//bit1结束计数条件

reg  [4:0]  cnt_bit;//24个bit计数寄存器
wire        add_cnt_bit;//24个bit开始计数条件
wire        end_cnt_bit;//24个bit结束计数条件

reg  [7:0]  cnt_led;//24个bit计数寄存器
wire        add_cnt_led;//24个bit开始计数条件
wire        end_cnt_led;//24个bit结束计数条件

reg  [7:0]  cnt_rst;//24个bit计数寄存器
wire        add_cnt_rst;//24个bit开始计数条件
wire        end_cnt_rst;//24个bit结束计数条件

always @(posedge sys_clk or negedge sys_rst_n) begin
    if (!sys_rst_n)begin
        cnt_0 <= 6'b0;
    end
    else if(add_cnt0)begin
        if (end_cnt0)begin
            cnt_0 <= 6'd0;
        end
        else begin
            cnt_0 <= cnt_0 +6'b1;
        end
    end
    else begin
        cnt_0 <= 6'b0;
    end
end

assign add_cnt0 = flag_0;//如果bit是0
assign end_cnt0 = add_cnt0 && (cnt_0 == T0H + T0L - 1);

endmodule